{% extends 'base.html' %}

{% block content %}

{% if object %}
  <h1>Edit <span class="teal-text">{{ object.name }}</span></h1>
{% else %}
  <h1>Add Gem</h1>
{% endif %}

<form action="" method="POST">
  {% csrf_token %}
  <table>
    {{ form.as_table }}
  </table>
  <button type="btn" id="locationbtn" disabled>Use Current Location</button>
  <button type="submit">SUBMIT</button>
</form>
  <script>
    const btn = document.getElementById('locationbtn');
    const latEl = document.getElementById('id_latitude');
    const lngEl = document.getElementById('id_longitude');
    let lat, lng;
    navigator.geolocation.getCurrentPosition(function(result){
      btn.disabled = false;
      lat = result.coords.latitude;
      lng = result.coords.longitude;
    })
    btn.addEventListener('click', function(evt){
      evt.preventDefault();
      latEl.value = lat;
      lngEl.value = lng;
    })
  </script>
  {% endblock %}