{% extends 'base.html' %}
{% block content %}
    <h1 class="text-center">Map time!</h1>
    <div id='map' width="100%" style='height:300px'></div>
    <script>
        mapboxgl.accessToken = '{{ MAP_KEY }}'
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v10',
            center: [-111.8910, 40.7608], // Starting position [lng, lat]
            zoom: 3, // Starting zoom level
        });

        const gems = [
            {% for gem in gems %}
                {lat: {{ gem.latitude}}, lng: {{ gem.longitude }}, name: "{{ gem.name }}" },
            {% endfor %}
        ];
        gems.forEach(function(gem) {
            new mapboxgl.Marker()
            .setLngLat([gem.lng, gem.lat]).addTo(map);
        })
    </script>
{% endblock %}